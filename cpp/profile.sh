#!/bin/sh
set -e

now_nano() {
    date +%s*1000000000+%N | bc
}

measure() {
    echo "[->] $@ begins"
    local begin=$(now_nano)
    $@
    local end=$(now_nano)
    local duration=$(echo "scale=6; ($end - $begin) / 1000000000" | bc)
    echo "[==] $@ took ${duration}s" | tee -a time.log
}

cd $(dirname $0)

make

TF_ROOT=$(pwd)/tensorflow
PKG=tensorflow/examples/pose-inference

measure ${TF_ROOT}/bazel-bin/${PKG}/pose-inference
